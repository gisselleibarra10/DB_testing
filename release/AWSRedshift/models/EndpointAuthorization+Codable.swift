// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension RedshiftClientTypes.EndpointAuthorization: Swift.Codable {
    enum CodingKeys: Swift.String, Swift.CodingKey {
        case allowedAllVPCs = "AllowedAllVPCs"
        case allowedVPCs = "AllowedVPCs"
        case authorizeTime = "AuthorizeTime"
        case clusterIdentifier = "ClusterIdentifier"
        case clusterStatus = "ClusterStatus"
        case endpointCount = "EndpointCount"
        case grantee = "Grantee"
        case grantor = "Grantor"
        case status = "Status"
    }

    public func encode(to encoder: Swift.Encoder) throws {
        var container = encoder.container(keyedBy: ClientRuntime.Key.self)
        if allowedAllVPCs != false {
            try container.encode(allowedAllVPCs, forKey: ClientRuntime.Key("AllowedAllVPCs"))
        }
        if let allowedVPCs = allowedVPCs {
            var allowedVPCsContainer = container.nestedContainer(keyedBy: ClientRuntime.Key.self, forKey: ClientRuntime.Key("AllowedVPCs"))
            for (index0, string0) in allowedVPCs.enumerated() {
                try allowedVPCsContainer.encode(string0, forKey: ClientRuntime.Key("VpcIdentifier.\(index0.advanced(by: 1))"))
            }
        }
        if let authorizeTime = authorizeTime {
            try container.encode(ClientRuntime.TimestampWrapper(authorizeTime, format: .dateTime), forKey: ClientRuntime.Key("authorizeTime"))
        }
        if let clusterIdentifier = clusterIdentifier {
            try container.encode(clusterIdentifier, forKey: ClientRuntime.Key("ClusterIdentifier"))
        }
        if let clusterStatus = clusterStatus {
            try container.encode(clusterStatus, forKey: ClientRuntime.Key("ClusterStatus"))
        }
        if endpointCount != 0 {
            try container.encode(endpointCount, forKey: ClientRuntime.Key("EndpointCount"))
        }
        if let grantee = grantee {
            try container.encode(grantee, forKey: ClientRuntime.Key("Grantee"))
        }
        if let grantor = grantor {
            try container.encode(grantor, forKey: ClientRuntime.Key("Grantor"))
        }
        if let status = status {
            try container.encode(status, forKey: ClientRuntime.Key("Status"))
        }
    }

    public init (from decoder: Swift.Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let grantorDecoded = try containerValues.decodeIfPresent(Swift.String.self, forKey: .grantor)
        grantor = grantorDecoded
        let granteeDecoded = try containerValues.decodeIfPresent(Swift.String.self, forKey: .grantee)
        grantee = granteeDecoded
        let clusterIdentifierDecoded = try containerValues.decodeIfPresent(Swift.String.self, forKey: .clusterIdentifier)
        clusterIdentifier = clusterIdentifierDecoded
        let authorizeTimeDecoded = try containerValues.decodeIfPresent(Swift.String.self, forKey: .authorizeTime)
        var authorizeTimeBuffer:ClientRuntime.Date? = nil
        if let authorizeTimeDecoded = authorizeTimeDecoded {
            authorizeTimeBuffer = try ClientRuntime.TimestampWrapperDecoder.parseDateStringValue(authorizeTimeDecoded, format: .dateTime)
        }
        authorizeTime = authorizeTimeBuffer
        let clusterStatusDecoded = try containerValues.decodeIfPresent(Swift.String.self, forKey: .clusterStatus)
        clusterStatus = clusterStatusDecoded
        let statusDecoded = try containerValues.decodeIfPresent(RedshiftClientTypes.AuthorizationStatus.self, forKey: .status)
        status = statusDecoded
        let allowedAllVPCsDecoded = try containerValues.decode(Swift.Bool.self, forKey: .allowedAllVPCs)
        allowedAllVPCs = allowedAllVPCsDecoded
        if containerValues.contains(.allowedVPCs) {
            struct KeyVal0{struct VpcIdentifier{}}
            let allowedVPCsWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.VpcIdentifier>.CodingKeys.self, forKey: .allowedVPCs)
            if let allowedVPCsWrappedContainer = allowedVPCsWrappedContainer {
                let allowedVPCsContainer = try allowedVPCsWrappedContainer.decodeIfPresent([Swift.String].self, forKey: .member)
                var allowedVPCsBuffer:[Swift.String]? = nil
                if let allowedVPCsContainer = allowedVPCsContainer {
                    allowedVPCsBuffer = [Swift.String]()
                    for stringContainer0 in allowedVPCsContainer {
                        allowedVPCsBuffer?.append(stringContainer0)
                    }
                }
                allowedVPCs = allowedVPCsBuffer
            } else {
                allowedVPCs = []
            }
        } else {
            allowedVPCs = nil
        }
        let endpointCountDecoded = try containerValues.decode(Swift.Int.self, forKey: .endpointCount)
        endpointCount = endpointCountDecoded
    }
}
