// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension RedshiftClientTypes.DataShare: Swift.Codable {
    enum CodingKeys: Swift.String, Swift.CodingKey {
        case allowPubliclyAccessibleConsumers = "AllowPubliclyAccessibleConsumers"
        case dataShareArn = "DataShareArn"
        case dataShareAssociations = "DataShareAssociations"
        case managedBy = "ManagedBy"
        case producerArn = "ProducerArn"
    }

    public func encode(to encoder: Swift.Encoder) throws {
        var container = encoder.container(keyedBy: ClientRuntime.Key.self)
        if allowPubliclyAccessibleConsumers != false {
            try container.encode(allowPubliclyAccessibleConsumers, forKey: ClientRuntime.Key("AllowPubliclyAccessibleConsumers"))
        }
        if let dataShareArn = dataShareArn {
            try container.encode(dataShareArn, forKey: ClientRuntime.Key("DataShareArn"))
        }
        if let dataShareAssociations = dataShareAssociations {
            var dataShareAssociationsContainer = container.nestedContainer(keyedBy: ClientRuntime.Key.self, forKey: ClientRuntime.Key("DataShareAssociations"))
            for (index0, datashareassociation0) in dataShareAssociations.enumerated() {
                try dataShareAssociationsContainer.encode(datashareassociation0, forKey: ClientRuntime.Key("member.\(index0.advanced(by: 1))"))
            }
        }
        if let managedBy = managedBy {
            try container.encode(managedBy, forKey: ClientRuntime.Key("ManagedBy"))
        }
        if let producerArn = producerArn {
            try container.encode(producerArn, forKey: ClientRuntime.Key("ProducerArn"))
        }
    }

    public init (from decoder: Swift.Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let dataShareArnDecoded = try containerValues.decodeIfPresent(Swift.String.self, forKey: .dataShareArn)
        dataShareArn = dataShareArnDecoded
        let producerArnDecoded = try containerValues.decodeIfPresent(Swift.String.self, forKey: .producerArn)
        producerArn = producerArnDecoded
        let allowPubliclyAccessibleConsumersDecoded = try containerValues.decode(Swift.Bool.self, forKey: .allowPubliclyAccessibleConsumers)
        allowPubliclyAccessibleConsumers = allowPubliclyAccessibleConsumersDecoded
        if containerValues.contains(.dataShareAssociations) {
            struct KeyVal0{struct member{}}
            let dataShareAssociationsWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.member>.CodingKeys.self, forKey: .dataShareAssociations)
            if let dataShareAssociationsWrappedContainer = dataShareAssociationsWrappedContainer {
                let dataShareAssociationsContainer = try dataShareAssociationsWrappedContainer.decodeIfPresent([RedshiftClientTypes.DataShareAssociation].self, forKey: .member)
                var dataShareAssociationsBuffer:[RedshiftClientTypes.DataShareAssociation]? = nil
                if let dataShareAssociationsContainer = dataShareAssociationsContainer {
                    dataShareAssociationsBuffer = [RedshiftClientTypes.DataShareAssociation]()
                    for structureContainer0 in dataShareAssociationsContainer {
                        dataShareAssociationsBuffer?.append(structureContainer0)
                    }
                }
                dataShareAssociations = dataShareAssociationsBuffer
            } else {
                dataShareAssociations = []
            }
        } else {
            dataShareAssociations = nil
        }
        let managedByDecoded = try containerValues.decodeIfPresent(Swift.String.self, forKey: .managedBy)
        managedBy = managedByDecoded
    }
}
