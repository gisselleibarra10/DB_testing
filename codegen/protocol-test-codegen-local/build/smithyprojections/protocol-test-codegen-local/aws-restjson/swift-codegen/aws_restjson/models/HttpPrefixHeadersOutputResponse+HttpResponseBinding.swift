// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension HttpPrefixHeadersOutputResponse: ClientRuntime.HttpResponseBinding {
    public init (httpResponse: ClientRuntime.HttpResponse, decoder: ClientRuntime.ResponseDecoder? = nil) throws {
        if let fooHeaderValue = httpResponse.headers.value(for: "X-Foo") {
            self.foo = fooHeaderValue
        } else {
            self.foo = nil
        }
        let keysForFooMap = httpResponse.headers.dictionary.keys.filter({ $0.starts(with: "X-Foo-") })
        if (!keysForFooMap.isEmpty) {
            var mapMember = [Swift.String: String]()
            for headerKey in keysForFooMap {
                let mapMemberValue = httpResponse.headers.dictionary[headerKey]?[0]
                let mapMemberKey = headerKey.removePrefix("X-Foo-")
                mapMember[mapMemberKey] = mapMemberValue
            }
            self.fooMap = mapMember
        } else {
            self.fooMap = [:]
        }
    }
}
